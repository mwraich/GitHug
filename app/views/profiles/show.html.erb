<div class="content">
<div id="profile-info-container">
<div id="profile-images">
    <% if (@profile.images.length < 2) %>
    <ul class="bxslider">
      <li><%= image_tag(@profile.user.github_image) %></li>
    </ul>
    <% else %>
      <ul class="bxslider">
        <li><%= image_tag(@profile.images[0].image_url) %></li>
        <% range = (0..(@profile.images.length)) %>
        <% range.select do |r| %>
        <li><%=  image_tag(@profile.images[r-1].image_url) %></li>
         <% end %>
      </ul>

    <% end %>
</div>
<div id="profile-page-title">
<div id="profile-name">
<h1 class="profile-name"><%= @profile.first_name %> <%= @profile.last_name %></h1>
</div>

<!-- To turn message button off, uncomment these and put in erb tags -->
<!-- if current_user.profile == @profile  -->
<!-- else  -->

<% if current_user.profile == @profile  %>
  <div class="spacing">  </div>

<% elsif @profile.blocked_by?(current_user) %>
  <div class="spacing">    </div>


  <%else %>
    <button class= "message-to-button">Message</button>
    <%= form_for BlockedUser.new do |f| %>
      <%= f.hidden_field :blocked_id, value: @profile.user_id %>
      <%= f.submit 'Block User', :class => "block_button" %>
    <% end %>
  <% end%>

</div>
</div>


<div id="profile-aboutme">
  <h2>About Me</h2>
  <p> <%= @profile.about_me %></p>
</div>

<div id="profile-details">
  <h2>My Details</h2>

  <li> Gender:
    <%= show_gender(@profile) %>
  </li>

  <li>
    Birthday: <%= @profile.birthday %>
  </li>

  <li>
    Operating System: <%= @profile.operating_system %>
  </li>

  <li>
    <%= @profile.city %>
  </li>
  <li>
    <%= @profile.province %>
  </li>
</div>


<div id="profile-languages">

  <h2> Languages </h2>
  <ul>
    <% @profile.languages.each do |lang| %>
      <li> <%= lang.language %> Skill Level: <%= lang.skill_level %></li>
    <% end %>
  </ul>
</div>

<div class="profile-tags">
<h2>Tags</h2>
  <div id="tag-spacing">
    <% @profile.tags.any? %>
    <% @profile.tags.each do |tag| %>
      <%= link_to tag.name, tag_path(tag.id) %>
    <% end %>
  </div>
</div>

<% if authorize_pull_request(@profile, current_user.profile) %>
  <button id="message-to-button" class= "message-and-request-button">Message</button>
  <%= render "messages/new_message" %>
<% else %>
  <%= form_for @pull_request do |request| %>
  <%= request.hidden_field :requestee_id, :value => @profile.id %>
  <%= request.submit %>
  <% end %>
<% end %>


<% if check_current_user %>
  <div class="reco_matches">
    <h2>Recomended For You</h2>
    <% if @profile_partnerReco.present?  %>
        <%= render "reco_partner" %>
    <% end %>
  <% if @profile_pairReco.present?  %>
      <%= render "reco_pair" %>
  <% end %>
<% end %>

<div class="new_message">
  <%= render "messages/new_message" %>
</div>
